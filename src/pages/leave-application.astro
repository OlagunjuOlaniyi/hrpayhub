---
import Layout from "../layouts/Layout.astro";
import FormContextIndicator from "../components/ui/TaxFormContextIndicator";
import { FormFieldComponent } from "../components/ui/TaxFormFieldControl";
---

<Layout title="HRPayHub :: Leave Application">
  <!-- Main content starts here -->
  <main>
    <!-- First section of Back button and Breadcrumb -->
    <section class="p-4">
      <div class="screenFrame">
        <!-- Back Navigation button and BreadCrumbs -->
        <div class="d-flex gap-5">
          <a
            href="/leave-management"
            title="Back to Dashboard"
            class="d-flex gap-2 align-items-center text-decoration-none text-primary-dark"
          >
            <img src="images/png/icons/angle-left.svg" alt="angle-left-back" />
            <span class="fs-16 fw-bold font-avenir-bold">Back</span>
          </a>

          <!-- Actual Breadcrumb here -->
          <div class="d-flex align-items-center gap-2">
            <a
              href="index.html"
              class="fs-14 text-decoration-none text-primary-dark">Dashboard</a
            >
            <img
              src="images/png/icons/angle-right.svg"
              alt="angle-right-back"
            />
            <a
              href="/leave-management"
              class="fs-14 text-decoration-none text-primary-dark"
              >Leave Management</a
            >
            <img
              src="images/png/icons/angle-right.svg"
              alt="angle-right-back"
            />
            <span class="fs-16 fw-bold text-primary-blue"
              >Leave Application</span
            >
          </div>
          <!-- Actual Breadcrumb here -->
        </div>
        <!-- Back Navigation button and BreadCrumbs -->
      </div>
    </section>
    <!-- First section of Back button and Breadcrumb -->

    <!-- First section of Back button and Breadcrumb -->
    <section class="px-4">
      <div class="screenFrame">
        <div class="rounded-4 shadow p-4 vstack gap-5 px-5">
          {/* Page Content Box */}
          <div class="p-lg-5">
            <div
              class="d-flex flex-column flex-lg-row gap-2 p-3 px-4 mb-5 clock_in_out"
            >
              <div class="d-flex flex-column pe-4">
                <span class="fs-12 text-secondary">Employee ID</span>
                <span class="fs-14 fw-700">N1424362</span>
              </div>
              <span class="clock_border_left"></span>
              <div class="d-flex flex-column px-lg-3">
                <span class="fs-12 text-secondary">Employee Name</span>
                <span class="fs-14 fw-700">Toluwalase Obasun</span>
              </div>
              <span class="clock_border_left"></span>
              <div class="d-flex flex-column px-lg-3">
                <span class="fs-12 text-secondary">Primary Department</span>
                <span class="fs-14 fw-700">Design</span>
              </div>
              <span class="clock_border_left"></span>
              <div class="d-flex flex-column px-lg-3">
                <span class="fs-12 text-secondary">Primay Function</span>
                <span class="fs-14 fw-700">Lorem Ipsum</span>
              </div>
              <span class="clock_border_left"></span>
              <div class="d-flex flex-column px-lg-3">
                <span class="fs-12 text-secondary">Designation</span>
                <span class="fs-14 fw-700">Lorem Ipsum</span>
              </div>
            </div>

            <div class="vstack" style="gap: 2.3rem">
              <!---- Leave Management Form --->
              <div class="d-flex align-items-center gap-4 add_employee_width">
                <div class="fs-14 fw-600 text-primary-blue">
                  Leave Management Form
                </div>
                <div class="flex-grow-1">
                  <div class="demarcator_line">&nbsp;</div>
                </div>
              </div>

              <!---- body ---->
              <div class="form-floating add_employee_width">
                <select
                  id="select_plan"
                  name="select_plan"
                  class="form-select_custom fs-14"
                  required
                >
                  <option value="" selected style="color: rgb(200, 200, 200)"
                    >Select</option
                  >
                  <option value="1">Retail</option>
                  <option value="2">Primary</option>
                  <option value="3">Tertiary</option>
                </select>
                <label for="select_plan">Leave Type &nbsp;<span>*</span></label>
              </div>
              <div class="form-floating add_employee_width">
                <input
                  type="text"
                  id="leave_bal"
                  name="leave_bal"
                  class="form-input fs-14"
                  placeholder=""
                  required
                />
                <label for="leave_bal">Leave Balance &nbsp;<span>*</span></label
                >
              </div>
              <div class="form-floating add_employee_width">
                <input
                  type="text"
                  id="no_of_days"
                  name="no_of_days"
                  class="form-input fs-14"
                  placeholder=""
                  required
                />
                <label for="no_of_days"
                  >Number of Days &nbsp;<span>*</span></label
                >
              </div>
              <div
                class="d-flex justify-content-between gap-3 add_employee_width"
              >
                <div class="form-floating add_employee_width">
                  <input
                    type="date"
                    id="start_time"
                    name="start_time"
                    class="form-input"
                    placeholder=""
                  />
                  <label for="start_time">Start Date &nbsp;<span>*</span></label
                  >
                </div>
                <div class="form-floating add_employee_width">
                  <input
                    type="date"
                    id="end_time"
                    name="end_time"
                    class="form-input"
                    placeholder=""
                  />
                  <label for="end_time">End Date &nbsp;<span>*</span></label>
                </div>
              </div>
              <div class="form-floating add_employee_width">
                <input
                  type="text"
                  id="contact_phone_no"
                  name="contact_phone_no"
                  class="form-input fs-14"
                  placeholder=""
                  required
                />
                <label for="contact_phone_no"
                  >Contact Phone Number &nbsp;<span>*</span></label
                >
              </div>
              <div class="form-floating add_employee_width">
                <textarea class="form-input" rows="2" id="reason"></textarea>
                <label for="reason">Reason for Leave &nbsp;<span>*</span></label
                >
              </div>

              <!---- upload ---->
              <form class="vstack gap-2" id="generate_payslip_form">
                <div class="fs-14 fw-600">
                  Supporting Document Upload <span style="color: red">*</span>
                  <div
                    class="upload_bucket_expense p-3 d-flex flex-column align-items-center justify-content-center"
                  >
                    <img
                      src="images/png/icons/cloud_upload.svg"
                      width="35px"
                      height="35px"
                      alt="cloud upload icon"
                    />
                    <div class="fs-14 fw-700" style="color: #6B7280">
                      Click to upload <span class="fw-400"
                        >or drag and drop</span
                      >
                    </div>
                    <div class="fs-12 fw-700" style="color: #6B7280">
                      PDF or DOCX (Max File Size: 2MB)
                    </div>
                    <button
                      type="button"
                      id="fileInputBtn"
                      class="delon-primary-btn d-flex gap-2 mt-2 bg-primary-blue border-0 text-white fs-14"
                    >
                      <img src="images/png/icons/search.svg" alt="arrow-down" />
                      <span>Browse Files</span>
                    </button>
                    <div
                      id="fileInputDetails"
                      class="d-none flex-shrink-1 bg-transparent border text-wrap w-100 py-1 px-2 mt-2 rounded-3 fs-14 d-flex gap-1 align-items-center"
                      role="button"
                    >
                      <span class="flex-fill text-truncate"
                        >gvfyguytctrcjrct.webp</span
                      >
                      <span class="flex-fill">
                        <img
                          src="images/png/icons/close-circle-6.svg"
                          width="15"
                          height="15"
                          alt="close_icon"
                        />
                      </span>
                    </div>
                    <input type="file" class="d-none" id="fileInput" />
                  </div>
                </div>
              </form>
              <div class="form-floating add_employee_width">
                <textarea class="form-input" rows="2" id="notes"></textarea>
                <label for="notes"
                  >Leave handover notes &nbsp;<span>*</span></label
                >
              </div>

              <!---- submit ---->
              <div class="d-flex justify-content-end add_employee_width">
                <button
                  type="button"
                  id="upload"
                  class="delon-primary-btn bg-primary-blue border-0 text-white fw-bold fs-14 expense_button"
                >
                  <span>Submit</span>
                </button>
              </div>
            </div>
          </div>
          {/* Page Content Box */}
        </div>
      </div>
    </section>

    <script is:inline>
      document.addEventListener("DOMContentLoaded", () => {
        $("#fileInputBtn").click((evt) => {
          $("#fileInput").click();
        });

        document
          .getElementById("fileInput")
          .addEventListener("change", function () {
            if (fileInput.files.length > 0) {
              const fileName = fileInput.files[0].name;
              $("#fileInputDetails span:first-child").text(fileName);
              $("#fileInputDetails").removeClass("d-none");
              $("#fileInputBtn").addClass("d-none");
              console.log("Selected file name:", fileName);
            }
          });
        $("#fileInputDetails span:nth-child(2)").click(() => {
          $("#fileInput").val("");
          $("#fileInputDetails span:first-child").text("");
          $("#fileInputDetails").addClass("d-none");
          $("#fileInputBtn").removeClass("d-none");
        });
      });
    </script>
  </main>
  <!-- Main content ends here -->
</Layout>

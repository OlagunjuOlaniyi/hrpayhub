---
// components/ui/ModalAddNew.astro
const { modalId = "updateStatus", title = "Update Status" } = Astro.props;
import { CloseCircleIcon } from "../Icons";
---

<div class="modal fade" id={modalId} tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content p-2 px-lg-5">
      <!-- Modal Header -->

      <div class="modal-header border-0 d-flex justify-content-between">
        <h4 class="modal-title fs-22 fw-700" id="modalTitle">
          {title}
        </h4>

        <img
          type="button"
          data-bs-dismiss="modal"
          src="images/png/icons/close-circle-1.svg"
          alt="close"
        />
      </div>

      <!-- Modal body -->
      <div class="modal-body text-left py-4 border-0">
        <div class="form-floating">
          <textarea class="form-input" rows="5" id="address"></textarea>
          <label for="ex_title">Add a comment (optional)</label>
        </div>

        <!---- upload ---->
        <form class="vstack gap-2 mt-3" id="generate_payslip_form">
          <div class="fs-14 fw-600">
            Upload relevant documents for completion proof
          </div>
          <div
            class="upload_bulk_status p-3 d-flex flex-column align-items-center justify-content-center"
          >
            <img
              src="images/png/icons/cloud_upload.svg"
              width="35px"
              height="35px"
              alt="cloud upload icon"
            />
            <div class="fs-14 fw-700" style="color: #6B7280">
              Click to upload <span class="fw-400">or drag and drop</span>
            </div>
            <div class="fs-12 fw-700" style="color: #6B7280">
              PDF or DOCX (Max File Size: 2MB)
            </div>
            <button
              type="button"
              id="fileInputBtn"
              class="delon-primary-btn d-flex gap-2 mt-2 bg-primary-blue border-0 text-white fs-14"
            >
              <img src="images/png/icons/search.svg" alt="arrow-down" />
              <span>Browse Files</span>
            </button>
            <div
              id="fileInputDetails"
              class="d-none flex-shrink-1 bg-transparent border text-wrap w-100 py-1 px-2 mt-2 rounded-3 fs-14 d-flex gap-1 align-items-center"
              role="button"
            >
              <span class="flex-fill text-truncate">gvfyguytctrcjrct.webp</span>
              <span class="flex-fill">
                <img
                  src="images/png/icons/close-circle-6.svg"
                  width="15"
                  height="15"
                  alt="close_icon"
                />
              </span>
            </div>
            <input type="file" class="d-none" id="fileInput" />
          </div>
        </form>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer border-0">
        <button
          type="button"
          class="btn bg-primary-blue fs-14 text-white"
          data-bs-dismiss="modal"
        >
          Mark as Done
        </button>
      </div>
    </div>
  </div>
</div>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    $("#fileInputBtn").click((evt) => {
      $("#fileInput").click();
    });

    document
      .getElementById("fileInput")
      .addEventListener("change", function () {
        if (fileInput.files.length > 0) {
          const fileName = fileInput.files[0].name;
          $("#fileInputDetails span:first-child").text(fileName);
          $("#fileInputDetails").removeClass("d-none");
          $("#fileInputBtn").addClass("d-none");
          console.log("Selected file name:", fileName);
        }
      });
    $("#fileInputDetails span:nth-child(2)").click(() => {
      $("#fileInput").val("");
      $("#fileInputDetails span:first-child").text("");
      $("#fileInputDetails").addClass("d-none");
      $("#fileInputBtn").removeClass("d-none");
    });
  });
</script>
